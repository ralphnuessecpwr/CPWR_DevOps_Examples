<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Helper classes | Mainframe DevOps</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/css/0.styles.c8537b01.css" as="style"><link rel="preload" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/app.ec1696b9.js" as="script"><link rel="preload" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/33.0efeaca3.js" as="script"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/10.4dc795ba.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/11.5935f050.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/12.0e2b9aca.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/13.78ae9647.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/14.a029e60a.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/15.ffe0034a.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/16.b348e724.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/17.ebd3ec0b.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/18.a8b355c3.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/19.46164589.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/2.da451cf3.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/20.da3c9874.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/21.461a1ac0.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/22.7e875135.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/23.f7fea76c.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/24.ae7c84bf.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/25.475d2aec.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/26.5e15d442.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/27.270e41aa.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/28.206d73f5.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/29.e41f7579.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/3.2a4c636b.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/30.61d12a91.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/31.e2654db9.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/32.be1c41d7.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/34.1b4a3f7e.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/35.da69e6e8.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/36.fed52b27.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/37.c121f4e9.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/38.99baad0c.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/39.3dd6385d.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/4.4c65f11a.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/5.f5c5d1fb.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/6.9143e1f5.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/7.3a9c137b.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/8.f2dc9578.js"><link rel="prefetch" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/9.e743477c.js">
    <link rel="stylesheet" href="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/css/0.styles.c8537b01.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/" class="home-link router-link-active"><img src="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/compuware.png" alt="Mainframe DevOps" class="logo"> <span class="site-name can-hide">Mainframe DevOps</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/" class="nav-link">Home</a></div><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/" class="nav-link router-link-active">Pipelines</a></div><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/tool_configuration/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/code_examples/" class="nav-link">APIs</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/" class="nav-link">Home</a></div><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/" class="nav-link router-link-active">Pipelines</a></div><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/tool_configuration/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/code_examples/" class="nav-link">APIs</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/" class="sidebar-link">Getting Started</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/pipelines.html" class="sidebar-link">Example Pipelines</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Mainframe_CI_Pipeline_from_Shared_Lib.html" class="sidebar-link">Shared Library Example</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Mainframe-CI-Example-pipeline.html" class="sidebar-link">Basic Example</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/scenario/" class="sidebar-link">ISPW Scenario</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html" class="sidebar-link">Total Test User Scenario</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/pipeline_parameters.html" class="sidebar-link">Pipeline Parameters</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/config_files.html" class="sidebar-link">Configuration Files</a></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/" class="active sidebar-link">Helper classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#filehelper" class="sidebar-link">FileHelper</a></li><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#githelper" class="sidebar-link">GitHelper</a></li><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#ispwhelper" class="sidebar-link">IspwHelper</a></li><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#jclskeleton" class="sidebar-link">JclSkeleton</a></li><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#pipelineconfig" class="sidebar-link">PipelineConfig</a></li><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#sonarhelper" class="sidebar-link">SonarHelper</a></li><li class="sidebar-sub-header"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#ttthelper" class="sidebar-link">TttHelper</a></li></ul></li><li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html" class="sidebar-link">Groovy Tips</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="helper-classes"><a href="#helper-classes" aria-hidden="true" class="header-anchor">#</a> Helper classes</h1> <p>The helper classes primarily serve as wrapper classes for the use of the different methods used by the plugins. Other serve purposes like provided configuration data <code>PipelineConfig</code> or preparing <code>JCL</code> for one specific execution of a pipeline <code>JclSkeleton</code>.</p> <h2 id="filehelper"><a href="#filehelper" aria-hidden="true" class="header-anchor">#</a> FileHelper</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/FileHelper.html">FileHelper</a> class is used to read external files and provides the methods.</p> <ul><li>The constructor <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/FileHelper.html#FileHelper">FileHelper(steps)</a>. receives the <code>steps</code> from the pipeline to <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>.</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/FileHelper.html#readLines">readLines(String path)</a> reads the records of a file at location <code>path</code> and returns an <code>ArrayList</code> of the individual records.</li></ul> <h2 id="githelper"><a href="#githelper" aria-hidden="true" class="header-anchor">#</a> GitHelper</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/GitHelper.html">GitHelper</a> class serves as a wrapper around the Git SCM plugin and provides the methods <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/GitHelper.html#GitHelper">GitHelper(steps)</a>.</p> <ul><li>The constructor receives the <code>steps</code> from the pipeline to <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>.</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/GitHelper.html#checkout">checkout(String gitUrl, String gitBranch, String gitCredentials, String tttFolder)</a> checks out the branch <code>gitBranch</code> in the Git(Hub) repository at <code>gitUrl</code>. It uses the <code>gitCredentials</code> to authenticate, and places the cloned Git repository into the folder <code>tttFolder</code> (within the Jenkins workspace).</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/GitHelper.html#checkoutPath">checkoutPath(String gitUrl, String gitBranch, String path, String gitCredentials, String gitProject)</a> performs a <em>sparse checkout</em>, and checks out path <code>path</code> in the branch <code>gitBranch</code> in the project <code>gitProject</code> in the Git(Hub) repository at <code>gitUrl</code>. It uses the <code>gitCredentials</code> to authenticate.</li></ul> <h2 id="ispwhelper"><a href="#ispwhelper" aria-hidden="true" class="header-anchor">#</a> IspwHelper</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/IspwHelper.html">IspwHelper</a> class serves as a wrapper around the Compuware ISPW plugin and provides the methods IspwHelper(steps, pConfig).</p> <ul><li>The constructor receives the <code>steps</code> from the pipeline to <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a> and a <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#PipelineConfig">PipelineConfig</a> to make use of pipeline execution specific parameters.</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/IspwHelper.html#downloadSources">downloadSources()</a> downloads all sources (COBOL programs and copybooks) contained in <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/scenario/">ISPW set</a> triggering the pipeline.</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/IspwHelper.html#downloadCopyBooks">downloadCopyBooks(String workspace)</a> does the following items:
<ul><li>receives the path to the <code>workspace</code> of the pipeline job</li> <li>uses the <code>referencedCopyBooks</code> method to determine all copybooks used by the download COBOL programs</li> <li>uses a <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html"><code>JclSkeleton</code></a> object's <code>createIebcopyCopyBooksJcl</code> method to create an <code>IEBCOPY</code> job <code>JCL</code> that copies all required copybooks in the list from the ISPW libraries into a temporary PDS</li> <li>submits this <code>JCL</code> using the <a href="https://wiki.jenkins.io/display/JENKINS/Compuware+Topaz+Utilities+Plugin" target="_blank" rel="noopener noreferrer">Topaz Utilities<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> plugin</li> <li>downloads the content of the temporary PDS, using the <a href="https://wiki.jenkins.io/display/JENKINS/Compuware+Source+Code+Download+for+Endevor,+PDS,+and+ISPW+Plugin" target="_blank" rel="noopener noreferrer">ISPW PDS downloader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>uses the <code>JclSkeleton</code> method <code>jclSkeleton.createDeleteTempDsn</code> to create a <code>DELETE</code> job <code>JCL</code></li> <li>and submits that <code>JCL</code></li></ul></li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/IspwHelper.html#referencedCopyBooks">referencedCopyBooks(String workspace)</a> does the following items:
<ul><li>receives the path to the <code>workspace</code> of the pipeline job</li> <li>searches all <code>*.cbl</code> program sources in the folder containing all downloaded sources and builds a list of COBOL programs</li> <li>for each program in the list it
<ul><li>reads the source file</li> <li>scans the content for valid <code>COPY</code> statements (e.g. not comments)</li> <li>determines the referenced copybook</li> <li>add each copybook to the list of copybooks</li></ul></li> <li>returns the resulting list of copybooks</li></ul></li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/IspwHelper.html#regressAssignmentList">regressAssignmentList(assignmentList, cesToken)</a> receives a list of assignment IDs in <code>assignmentList</code>, the <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/tool_configuration/CES_credentials_token.html">CES Token</a> in <code>cesToken</code> and calls method <code>regressAssignment</code> for each element of <code>assignmentList</code></li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/IspwHelper.html#regressAssignment">def regressAssignment(assignment, cesToken)</a> receives an Assignment ID in <code>assignment</code>, the <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/tool_configuration/CES_credentials_token.html">CES Token</a> in <code>cesToken</code> and uses the ISPW REST API to regress the assignment.</li></ul> <h2 id="jclskeleton"><a href="#jclskeleton" aria-hidden="true" class="header-anchor">#</a> JclSkeleton</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/JclSkeleton.html">JclSkeleton</a> class allows the pipelines to customize pieces of <code>JCL</code> in certain, predefined ways. This allows changing e.g. <code>job cards</code>, <code>STEPLIB</code> concatenations and others during runtime. The <code>JCL</code> skeletons are read from folder <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html">'./config/skels'</a> in the pipeline workspace.</p> <ul><li>The constructor <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html#JclSkeleton">JclSkeleton(steps, String workspace, String ispwApplication, String ispwPathNum)</a> receives the <code>steps</code> from the pipeline to <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>, the path to the pipeline <code>workpace</code>, the name of the ISPW application in <code>ispwApplication</code> and the <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html">number of the development path</a> in <code>pathNum</code>.</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html#initialize">initialize()</a> is used for additional <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the constructor</a> and it:
<ul><li>reads the <code>JobCard.jcl</code> skeleton file</li> <li>reads the <code>deleteDs.skel</code> skeleton file</li> <li>initializes the <code>IEBCOPY</code> <code>JCL</code> by using the <code>buildIebcopySkel</code> method</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html">buildIebcopySkel()</a>  initializes the <code>IEBCOPY</code> <code>JCL</code> by
<ul><li>reading the <code>iebcopy.skel</code> skeleton file (main <code>JCL</code>)</li> <li>reading the <code>iebcopyInDd.skel</code> skeleton file (input <code>DD</code> statements)</li> <li>building the required <code>INDD=INx</code> cards</li> <li>replacing the placeholders in the skeleton <code>JCL</code> by the concrete values</li> <li>returning the resulting <code>JCL</code> code</li></ul></li></ul></li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html">createIebcopyCopyBooksJcl(String targetDsn, List copyMembers)</a> receives the target DSN for the <code>IEBCOPY</code> job in <code>targetDsn</code> and the list of required copybooks in <code>copyMembers</code> and
<ul><li>places the <code>job card</code> from <code>initialize</code> in front of the <code>JCL</code> code</li> <li>builds a <code>SELECT MEMBER=</code> card for each entry in <code>copyMembers</code></li> <li>replaces the placeholders in the skeleton <code>JCL</code> by the concrete values</li> <li>returns the resulting <code>JCL</code>code <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html"><code>createDeleteTempDsn(String targetDsn)</code></a></li> <li>receives the target DSN for the <code>DELETE</code> job in <code>targetDsn</code> and places the <code>job card</code> from <code>initialize</code> in front of the <code>JCL</code> code</li> <li>adds the <code>DELETE</code> skeleton code</li> <li>replaces the placeholders in the skeleton <code>JCL</code> by the concrete values</li> <li>returns the resulting <code>JCL</code>code</li></ul></li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/Jcl_skeletons.html">readSkelFile(String fileName)</a> receives a <code>fileName</code> and
<ul><li>reads the corresponding file from the skeletons folder in the pipeline workspace</li> <li>returns the content of the file as list of records</li></ul></li></ul> <h2 id="pipelineconfig"><a href="#pipelineconfig" aria-hidden="true" class="header-anchor">#</a> PipelineConfig</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/PipelineConfig.html">PipelineConfig</a> class stores and allows retrieval of any pipeline <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/pipeline_parameters.html">configuration and runtime specific parameters</a>.</p> <ul><li>The constructor <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/PipelineConfig.html#PipelineConfig">PipelineConfig(steps, workspace, params, mailListLines)</a> receives the <code>steps</code> from the pipeline to <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>, the path of the pipeline <code>workspace</code> the <code>Map</code> <code>params</code> containing the <code>key:value</code> parameter pairs from the <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Mainframe_CI_Pipeline_from_Shared_Lib.html">pipeline call</a>, and a the list of records from the <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/tool_configuration/"><code>mailList.config</code> file</a> and initializes all parameters that can be initialized immediately.</li> <li><a href=".PipelineConfig#initialize">initialize()</a> is used for additional <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the constructor</a> and it:
<ul><li>deletes any old content from the pipeline workspace</li> <li>Uses the <code>checkoutPath</code>method of the <a href="#GitHelper"><code>GitHelper</code> class</a> to download the path containing the configuration files from the GitHub repository containing the configuration. (In future configuration files will be move to <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/tool_configuration/">Managed Files</a>, thus avoiding to have to download configuration from GitHub and exposure of configuration on GitHub.)</li> <li>execute the following internal methods to set the remaining configuration values</li></ul></li> <li><a href=".PipelineConfig#setServerConfig">setServerConfig()</a> does the following items:
<ul><li>reads the pipeline configuration file <code>pipeline.config</code>, containing server URLs (e.g. Sonar, XL Release) etc.</li> <li>extracts the values for the corresponding parameters</li> <li>sets the parameters</li></ul></li> <li><a href=".PipelineConfig#setTttGitConfig">setTttGitConfig()</a> does the following items:
<ul><li>reads the pipeline configuration file <code>tttgit.config</code>, containing information about the GitHub repository storing the Topaz for Total Test projects</li> <li>extracts the values for the corresponding parameters</li> <li>sets the parameters</li></ul></li> <li><a href=".PipelineConfig#setMailConfig">setMailConfig()</a> does the following items:
<ul><li>loops though the list of <code>mailListLines</code> containing the <code>TSO user:email</code> pairs</li> <li>turns the records into a <code>Map</code></li> <li>determines the email address for the owner of the ISPW set and sets the parameter <code>mailRecipient</code> accordingly</li></ul></li> <li><a href=".PipelineConfig#readConfigFile">readConfigFile(String fileName)</a> uses an instance of the <a href="#FileHelper"><code>FileHelper</code></a> class to read the configuration files</li></ul> <h2 id="sonarhelper"><a href="#sonarhelper" aria-hidden="true" class="header-anchor">#</a> SonarHelper</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/SonarHelper.html">SonarHelper</a> class serves as a wrapper to execute the SonarQube scanner.</p> <ul><li>The constructor <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/SonarHelper.html#SonarHelper">SonarHelper(script, steps, pConfig)</a> receives the <code>script</code>object and the <code>steps</code> from the pipeline  and a <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#PipelineConfig"><code>PipelineConfig</code></a> to make use of pipeline execution specific parameters.</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/SonarHelper.html#initialize">initialize()</a> is used for additional <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the constructor</a> and determines the scanner home path</li> <li><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/SonarHelper.html#scan">scan()</a> Executes the Sonar scanner. First it prepares all required parameters required for this scenario:
<ul><li><a href="https://docs.sonarqube.org/display/SONAR/Generic+Test+Data" target="_blank" rel="noopener noreferrer"><code>sonar.testExecutionReportPaths</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allows using a comma-separated list of paths the results of unit tests (Topaz for Total Test in our case) in the format required by the Sonar scanner.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.tests</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comma-separated list of folders containing unit tests (Topaz for Total Test projects in our case)</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Generic+Test+Data" target="_blank" rel="noopener noreferrer"><code>coverageReportPaths</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> path to code coverage results. With Xpediter Code Coverage the results will reside in <code>Coverage/Coverage.xml</code>.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.projectKey</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> the SonarQube project key that is unique for each project. Our example pipelines use the <a href="https://wiki.jenkins.io/display/JENKINS/Building+a+software+project" target="_blank" rel="noopener noreferrer">Jenkins environment variable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>JOB_NAME</code>.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.projectName</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> the SonarQube project name that is unique for each project. Our example pipelines use the <a href="https://wiki.jenkins.io/display/JENKINS/Building+a+software+project" target="_blank" rel="noopener noreferrer">Jenkins environment variable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>JOB_NAME</code>.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.projectVersion</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> the SonarQube project version. The current examples to not modify the project version between executions.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.sources</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comma-separated paths to directories containing source files. With the ISPW downloader the sources reside in folder <code>&lt;ispw_application&gt;/MF_Source</code>.</li> <li><a href="https://docs.sonarqube.org/display/PLUG/COBOL+Plugin+Advanced+Configuration" target="_blank" rel="noopener noreferrer"><code>sonar.cobol.copy.directories</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comma-separated paths to COBOL copybooks.  With the ISPW downloader the sources reside in folder <code>&lt;ispw_application&gt;/MF_Source</code> and the <code>downloadCopyBooks</code> method of the <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#IspwHelper.html"><code>IspwHelper</code></a> class copybooks will reside in the same folder as the COBOL sources <code>&lt;ispw_application&gt;/MF_Source</code>.</li> <li><a href="https://docs.sonarqube.org/display/PLUG/COBOL+Plugin+Advanced+Configuration" target="_blank" rel="noopener noreferrer"><code>sonar.cobol.file.suffixes</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> file suffixes for the Sonar scanner to identify files that need to be scanned.</li> <li><a href="https://docs.sonarqube.org/display/PLUG/COBOL+Plugin+Advanced+Configuration" target="_blank" rel="noopener noreferrer"><code>sonar.cobol.copy.suffixes</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> file suffixes for the Sonar scanner to identify COBOL copybooks.</li></ul></li></ul> <h2 id="ttthelper"><a href="#ttthelper" aria-hidden="true" class="header-anchor">#</a> TttHelper</h2> <p>The <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/TttHelper.html">TttHelper</a> class serves as a wrapper around Topaz for Total Test related activities like, executing the unit tests for the downloaded programs in a loop, and gathering the results from Code Coverage.</p> <ul><li><p>The constructor <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/TttHelper.html#TttHelper">TttHelper(script, steps, pConfig)</a> receives the <code>script</code>object and the <code>steps</code> from the pipeline  and a <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/#PipelineConfig.html"><code>PipelineConfig</code></a> to make use of pipeline execution specific parameters.</p></li> <li><p><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/TttHelper.html#initialize">initialize()</a> is used for additional <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the constructor</a> and does the following:</p> <ul><li>Instantiates a <code>JclSkeleton</code> for later use by <code>loopThruScenarios()</code>.</li> <li>Builds a list of downloaded COBOL sources and a list of downloaded <code>.testscenarios</code>.</li></ul></li> <li><p><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/TttHelper.html#loopThruScenarios">loopThruScenarios()</a> loops through the <code>.testscenarios</code> and for each scenario:</p> <ul><li>determines if the scenario matches one of the COBOL programs</li> <li>in that case
<ul><li>the job card of the corresponding runner jcl gets replaced by the configuration job card</li> <li>the scenario gets executed</li></ul></li></ul></li> <li><p><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/TttHelper.html#passResultsToJunit">passResultsToJunit()</a> uses the JUnit plugin to display the unit test results on the pipeline dashboard.</p></li> <li><p><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/helper_classes/TttHelper.html#collectCodeCoverageResults">collectCodeCoverageResults()</a> uses the Xpediter Code Coverage plugin to retrieve code coverage results from the Xpediter Code Coverage repository.</p></li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/config_files.html" class="prev">
          Configuration Files
        </a></span> <span class="next"><a href="/https:/ralphnuessecpwr.github.io/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html">
          Groovy Tips
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/app.ec1696b9.js" defer></script><script src="https://ralphnuessecpwr.github.io/CPWR_DevOps_Examples/assets/js/33.0efeaca3.js" defer></script>
  </body>
</html>
