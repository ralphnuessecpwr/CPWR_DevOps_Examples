<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Total Test User Scenario | Mainframe DevOps</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/CPWR_DevOps_Examples/assets/css/0.styles.38688a71.css" as="style"><link rel="preload" href="/CPWR_DevOps_Examples/assets/js/app.75a8ec7a.js" as="script"><link rel="preload" href="/CPWR_DevOps_Examples/assets/js/8.f2dc9578.js" as="script"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/10.4dc795ba.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/11.5935f050.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/12.0e2b9aca.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/13.78ae9647.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/14.a029e60a.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/15.ffe0034a.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/16.b348e724.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/17.ebd3ec0b.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/18.a8b355c3.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/19.46164589.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/2.da451cf3.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/20.da3c9874.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/21.461a1ac0.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/22.7e875135.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/23.f7fea76c.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/24.ae7c84bf.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/25.475d2aec.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/26.5e15d442.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/27.270e41aa.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/28.206d73f5.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/29.e41f7579.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/3.2a4c636b.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/30.61d12a91.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/31.e2654db9.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/32.be1c41d7.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/33.0efeaca3.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/34.1b4a3f7e.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/35.da69e6e8.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/36.fed52b27.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/37.c121f4e9.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/38.99baad0c.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/39.3dd6385d.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/4.4c65f11a.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/5.f5c5d1fb.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/6.9143e1f5.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/7.3a9c137b.js"><link rel="prefetch" href="/CPWR_DevOps_Examples/assets/js/9.e743477c.js">
    <link rel="stylesheet" href="/CPWR_DevOps_Examples/assets/css/0.styles.38688a71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CPWR_DevOps_Examples/" class="home-link router-link-active"><img src="/CPWR_DevOps_Examples/compuware.png" alt="Mainframe DevOps" class="logo"> <span class="site-name can-hide">Mainframe DevOps</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CPWR_DevOps_Examples/" class="nav-link">Home</a></div><div class="nav-item"><a href="/CPWR_DevOps_Examples/pipelines/" class="nav-link router-link-active">Pipelines</a></div><div class="nav-item"><a href="/CPWR_DevOps_Examples/tool_configuration/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/CPWR_DevOps_Examples/code_examples/" class="nav-link">APIs</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CPWR_DevOps_Examples/" class="nav-link">Home</a></div><div class="nav-item"><a href="/CPWR_DevOps_Examples/pipelines/" class="nav-link router-link-active">Pipelines</a></div><div class="nav-item"><a href="/CPWR_DevOps_Examples/tool_configuration/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/CPWR_DevOps_Examples/code_examples/" class="nav-link">APIs</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/CPWR_DevOps_Examples/pipelines/" class="sidebar-link">Getting Started</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/pipelines.html" class="sidebar-link">Example Pipelines</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/Mainframe_CI_Pipeline_from_Shared_Lib.html" class="sidebar-link">Shared Library Example</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/Mainframe-CI-Example-pipeline.html" class="sidebar-link">Basic Example</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/scenario/" class="sidebar-link">ISPW Scenario</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html" class="active sidebar-link">Total Test User Scenario</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#best-practices-for-topaz-for-topaz-total-unit-tests" class="sidebar-link">Best Practices for Topaz for Topaz Total Unit Tests</a></li><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#structuring-tests" class="sidebar-link">Structuring Tests</a></li><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#naming-conventions" class="sidebar-link">Naming conventions</a></li><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#the-topaz-for-total-test-project-structure" class="sidebar-link">The Topaz for Total Test project structure</a></li><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#the-runner-jcl" class="sidebar-link">The runner.jcl</a></li><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#adding-new-test-cases" class="sidebar-link">Adding new test cases</a></li><li class="sidebar-sub-header"><a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_scenario.html#storing-the-topaz-for-total-test-project-in-git-github" class="sidebar-link">Storing the Topaz for Total Test project in Git/GitHub</a></li></ul></li><li><a href="/CPWR_DevOps_Examples/pipelines/pipeline_parameters.html" class="sidebar-link">Pipeline Parameters</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/config_files.html" class="sidebar-link">Configuration Files</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/helper_classes/" class="sidebar-link">Helper classes</a></li><li><a href="/CPWR_DevOps_Examples/pipelines/Jenkins_Groovy.html" class="sidebar-link">Groovy Tips</a></li></ul> </div> <div class="page"> <div class="content"><h2 id="best-practices-for-topaz-for-topaz-total-unit-tests"><a href="#best-practices-for-topaz-for-topaz-total-unit-tests" aria-hidden="true" class="header-anchor">#</a> Best Practices for Topaz for Topaz Total Unit Tests</h2> <p>Since most mainframe development is not green field development, the first step in working with Topaz for Total Test will be executing a program in question under control of the Xpediter debugger. During the debugging session Xpediter and Topaz for Total Test allow recording individual test cases. One such test case, in the sense of Topaz for Total Test, is one execution of a program (compile unit) from beginning (<code>PROCEDURE DIVISION</code> or <code>ENTRY</code> point) to end (e.g. <code>GOBACK</code>). It consists of:</p> <ul><li>Input values as recorded at program <code>ENTRY</code></li> <li>Output values as recorded at program exit (e.g. <code>GOBACK</code>)</li> <li>Assertions for the recorded output values</li> <li>Stubs (simulation data) for:
<ul><li>Sub program calls</li> <li>File I/O, i.e. <code>QSAM</code> or <code>VSAM</code> reads and writes</li> <li><code>DB2 SQL</code> statement execution
<ul><li>Host variables</li> <li>Column values</li> <li><code>SQLCODE</code></li></ul></li> <li><code>IMS DL/I</code> calls
<ul><li>PCB/ACB before and after each call (incl. <code>IMS STATUS-CODE</code>)</li> <li>Segment Search Argument (<code>SSA</code>)</li> <li>Segment data</li></ul></li></ul></li> <li>Any write stub will also create assertions for the data written to the external data source</li></ul> <h2 id="structuring-tests"><a href="#structuring-tests" aria-hidden="true" class="header-anchor">#</a> Structuring Tests</h2> <p>Topaz for Total Test allows storing one or more test case for one or more programs. It is a recommended practice, though, to create one Topaz for Total Test project per program. These projects allow grouping test cases into different scenarios (e.g. by major program branch being executed) and to define and use test suites to execute all test scenarios in one run.</p> <h2 id="naming-conventions"><a href="#naming-conventions" aria-hidden="true" class="header-anchor">#</a> Naming conventions</h2> <p>In order to map Topaz for Total Test project assets, stored in Git, to program components, stored in ISPW, naming conventions are used. These should be followed already when recording the unit tests, but asset names may be changed later, after recording, to use the following naming conventions:</p> <ul><li>The Topaz for Total Test project name uses <code>&lt;Target_Program_Name&gt;_Unit_Tests</code> as project name</li> <li>The test scenario files or test suite files contain the <code>&lt;Target_Program_Name&gt;</code> as first part of their file name, followed by an underscore <code>_</code>, follwowed by any trailing name.</li> <li>Topaz for Total Test itself requires the file extensions
<ul><li><code>.testscenario</code> for test scenarios</li> <li><code>.testsuite</code> for test suites</li></ul></li></ul> <p>The <a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_in_Git.html">Git repository</a> uses <code>&lt;ISPW_Stream_Name&gt;_&lt;ISPW_Application_Name&gt;_Unit_Tests</code> as name.</p> <h2 id="the-topaz-for-total-test-project-structure"><a href="#the-topaz-for-total-test-project-structure" aria-hidden="true" class="header-anchor">#</a> The Topaz for Total Test project structure</h2> <p>A Topaz for Total Test project will use the following folder structure, which will be generated and populated automatically, when the first test case gets recorded by Xpediter/Topaz for Total Test:</p> <pre><code>&lt;project_name&gt;(root)                            # e.g. &lt;Target_Program_Name&gt;_Unit_Tests
+- Unit Tests
    +- Interfaces                               # interfaces to programs (LINKAGE SECTION) and I/O stubs
    +- JCL                                      # jcl 'members' for the execution of tests
    +- Scenarios                                # test scenarios
    +- Structures                               # COBOL structures (01-levels and sub-fields) making up the different interfaces
    +- Stubs                                    # Simulation data for sub-programs and external I/O
    +- Suites                                   # test suite(s) executing one or more test scenarios
</code></pre> <p><img src="/CPWR_DevOps_Examples/assets/img/TTT_project_structure.2891ce59.png" alt="TTT_project"></p> <h2 id="the-runner-jcl"><a href="#the-runner-jcl" aria-hidden="true" class="header-anchor">#</a> The runner.jcl</h2> <p>When using Xpediter/Topaz for Total Test to record test cases, the <code>JCL</code> folder will contain sample <code>JCL</code> code which is required to execute the Topaz for Total Test driver program <code>TTTRUNNR</code>. As of now, Topaz for Total Test cannot create stub data for 100% of all  <code>SQL</code> statements or <code>DL/I</code> calls. Therefore, test execution of some programs will require a &quot;mixed&quot; mode - partly stubbed, partly using life data. For these situations the following sample <code>JCL</code>is generated:</p> <ul><li><code>RunnerBmp.jcl</code> for tests of <code>IMS</code> programs in &quot;mixed&quot; mode</li> <li><code>RunnerBmpDB2.jcl</code> for tests of <code>DB2/IMS</code> programs in &quot;mixed&quot; mode</li> <li><code>RunnerDb2.jcl</code> for tests of <code>DB2</code> programs in &quot;mixed&quot; mode</li></ul> <p>In case all I/O can be stubbed, the <code>Runner.jcl</code> can be used as a template for the test execution <code>JCL</code>.</p> <p>Due to the design of the example application, there are three paths through the development stages. Therefore, there will be three different <code>STEPLIB</code> concatenations to use in the Topaz for Total Test <code>runner.jcl</code>. The approach taken in the example is to have three different versions of the <code>runner.jcl</code> each using a different <code>STEPLIB</code> concatenation. The code of the pipeline will determine which <code>jcl</code> to use.</p> <ul><li><code>Runner_PATH1.jcl</code> is used for the path from <code>DEV1</code> to <code>PRD</code></li> <li><code>Runner_PATH2.jcl</code> is used for the path from <code>DEV2</code> to <code>PRD</code></li> <li><code>Runner_PATH3.jcl</code> is used for the path from <code>DEV3</code> to <code>PRD</code></li></ul> <p><img src="/CPWR_DevOps_Examples/assets/img/Example_life_cycle.54b2d76b.png" alt="Life Cycle"></p> <div class="language-jcl extra-class"><pre class="language-text"><code>//RUNNER EXEC PGM=TTTRUNNR

//STEPLIB  DD DISP=SHR,DSN=SYS2.CW.&amp;CWGACX..SLCXLOAD
//         DD   DSN=CEE.SCEERUN,DISP=SHR
//         DD   DISP=SHR,DSN=SALESSUP.RXN3.DEV2.LOAD
//         DD   DISP=SHR,DSN=SALESSUP.RXN3.QA2.LOAD
//         DD   DISP=SHR,DSN=SALESSUP.RXN3.STG.LOAD
//         DD   DISP=SHR,DSN=SALESSUP.RXN3.PRD.LOAD

</code></pre></div><h2 id="adding-new-test-cases"><a href="#adding-new-test-cases" aria-hidden="true" class="header-anchor">#</a> Adding new test cases</h2> <p>New test cases may be added to an existing test scenario by duplicating existing test cases and modifying the input and assertion data (based on any new requirements). Refer to the Topaz for Total Test online help for more details.</p> <h2 id="storing-the-topaz-for-total-test-project-in-git-github"><a href="#storing-the-topaz-for-total-test-project-in-git-github" aria-hidden="true" class="header-anchor">#</a> Storing the Topaz for Total Test project in Git/GitHub</h2> <p>The recommended procedure to share Topaz for Total Test projects across teams and to use them in automation pipelines is <a href="/CPWR_DevOps_Examples/pipelines/scenario/TTT_in_Git.html">storing these projects in Git/GitHub repositories.</a></p> <p><img src="/CPWR_DevOps_Examples/assets/img/TTT_in_Git_and_GitHub.fced6173.png" alt="TTT in Git"></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/CPWR_DevOps_Examples/pipelines/scenario/" class="prev router-link-active">
          ISPW Scenario
        </a></span> <span class="next"><a href="/CPWR_DevOps_Examples/pipelines/pipeline_parameters.html">
          Pipeline Parameters
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/CPWR_DevOps_Examples/assets/js/app.75a8ec7a.js" defer></script><script src="/CPWR_DevOps_Examples/assets/js/8.f2dc9578.js" defer></script>
  </body>
</html>
